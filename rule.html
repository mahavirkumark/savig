{
Â  "rules": {
Â  Â  // 1ï¸âƒ£ USER-SPECIFIC PRIVATE DATA NODES

Â  Â  // Node for general user profile/settings data
Â  Â  "users": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid"
Â  Â  Â  }
Â  Â  },

Â  Â  // ğŸ”‘ PRINCIPLES
Â  Â  "principles": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid",

Â  Â  Â  Â  "$principleId": {
Â  Â  Â  Â  Â  ".validate": "newData.hasChildren(['title']) || newData.exists() === false || data.exists()",
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  "title": { ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 255" },
Â  Â  Â  Â  Â  "description": { ".validate": "newData.isString() || newData.val() === '' || !newData.exists()" },
Â  Â  Â  Â  Â  "createdAt": { ".validate": "newData.isNumber() || !newData.exists()" },
Â  Â  Â  Â  Â  "$other": { ".validate": false } // Deny unexpected fields
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  },

Â  Â  // ğŸ”‘ ADDRESSES (Validated for all expected fields: id, place, landmark, mapLink, timestamp)
Â  Â  "addresses": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid",

Â  Â  Â  Â  "$addressId": {
Â  Â  Â  Â  Â  // Requires these fields on new creation/set
Â  Â  Â  Â  Â  ".validate": "newData.hasChildren(['id', 'place', 'landmark', 'mapLink']) || newData.exists() === false || data.exists()",
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  "id": {Â 
Â  Â  Â  Â  Â  Â  // Ensures the 'id' field exists and matches the path variable ($addressId)
Â  Â  Â  Â  Â  Â  ".validate": "newData.isString() && newData.val() == $addressId"Â 
Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  "place": { ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 150" },
Â  Â  Â  Â  Â  "landmark": { ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length < 5000" },
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  // Allows mapLink to be an empty string or absent on update
Â  Â  Â  Â  Â  "mapLink": { ".validate": "newData.isString() || newData.val() === '' || !newData.exists()" },
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  "timestamp": { ".validate": "newData.isNumber() || !newData.exists()" },
Â  Â  Â  Â  Â  "$other": { ".validate": false }Â 
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  },
Â  Â Â 
Â  Â  // --- DAILY ESSENTIALS ---
Â  Â  "essentials": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid",
Â  Â  Â  Â  "$essentialId": {
Â  Â  Â  Â  Â  ".validate": "newData.hasChildren(['productName']) || newData.hasChildren(['personName']) || newData.hasChildren(['purchaseDate']) || newData.hasChildren(['productPrice']) || newData.exists() === false || data.exists()",
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  "id": { ".validate": "newData.isString() && newData.val() == $essentialId" },
Â  Â  Â  Â  Â  "personName": { ".validate": "newData.isString() || !newData.exists()" },
Â  Â  Â  Â  Â  "productName": { ".validate": "newData.isString() || !newData.exists()" },
Â  Â  Â  Â  Â  "productPrice": { ".validate": "newData.isString() || newData.isNumber() || !newData.exists()" },
Â  Â  Â  Â  Â  "$other": { ".validate": false }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  },

Â  Â  // --- VEHICLES ---
Â  Â  "vehicles": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid",
Â  Â  Â  Â  "$vehicleId": {
Â  Â  Â  Â  Â  ".validate": "newData.hasChildren(['ownerName', 'vehicleNo']) || newData.exists() === false || data.exists()",
Â  Â  Â  Â  Â  "ownerName": { ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 150" },
Â  Â  Â  Â  Â  "vehicleNo": { ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 20" },
Â  Â  Â  Â  Â  "timestamp": { ".validate": "newData.isNumber() || !newData.exists()" },
Â  Â  Â  Â  Â  "$other": { ".validate": false }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  },

Â  Â  // --- TRAVEL RULES, BIRTHDAYS, PASSWORDS, INCOME, LINKS ---
Â  Â  "travel_rules": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid",
Â  Â  Â  Â  "$ruleId": {
Â  Â  Â  Â  Â  ".validate": "newData.hasChildren(['type', 'name']) || newData.exists() === false || data.exists()",
Â  Â  Â  Â  Â  "$other": { ".validate": false }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  },
Â  Â Â 
Â  Â  "birthdays": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid",
Â  Â  Â  Â  "$birthdayId": {
Â  Â  Â  Â  Â  ".validate": "newData.hasChildren(['name', 'date']) || newData.exists() === false || data.exists()",
Â  Â  Â  Â  Â  "$other": { ".validate": false }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  },

Â  Â  "passwords": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid",
Â  Â  Â  Â  "$passwordId": { ".validate": "newData.hasChildren() || newData.isString() || newData.isNumber() || !newData.exists()" }
Â  Â  Â  }
Â  Â  },
Â  Â Â 
Â  Â  "income": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid",
Â  Â  Â  Â  "$incomeId": { ".validate": "newData.hasChildren() || newData.isString() || newData.isNumber() || !newData.exists()" }
Â  Â  Â  }
Â  Â  },
Â  Â Â 
Â  Â  "links": {
Â  Â  Â  "$uid": {
Â  Â  Â  Â  ".read": "$uid === auth.uid",
Â  Â  Â  Â  ".write": "$uid === auth.uid",
Â  Â  Â  Â  "$linkId": { ".validate": "newData.hasChildren() || (newData.isString() && newData.val().length > 0) || !newData.exists()" }
Â  Â  Â  }
Â  Â  },
Â  Â Â 
Â  Â Â 
Â  Â  // 2ï¸âƒ£ PUBLIC DATAÂ 
Â  Â  "contacts": {
Â  Â  Â  ".read": true,
Â  Â  Â  ".write": "auth != null",
Â  Â  Â  "$contactId": {
Â  Â  Â  Â  ".validate": "data.exists() || newData.hasChildren(['name', 'email'])",
Â  Â  Â  Â  "$other": { ".validate": false }
Â  Â  Â  }
Â  Â  },

Â  Â  "festivals": {
Â  Â  Â  ".read": true,
Â  Â  Â  ".write": false
Â  Â  },

Â  Â  // 3ï¸âƒ£ DEFAULT DENYÂ 
Â  Â  ".read": false,
Â  Â  ".write": false
Â  }
}