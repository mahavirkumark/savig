<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savig</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

   <style>
        /* 1. Theme Variables & Professional Reset */
        :root {
            --bg-main: #0f172a; /* Deep Midnight Blue */
            --text-primary: #ffffff;
            --text-dim: #94a3b8;
            --accent: #2563eb;
            --savig-yellow: #ffe11b; /* Brand Yellow */
            --glass: rgba(30, 41, 59, 0.45);
            --border: rgba(255, 255, 255, 0.1);
        }



        /* 2. Unified Fixed Header */
        .nav-container {
         position: relative;
  
            width: 100%;
            background: var(--bg-main);
            z-index: 1000;
            border-bottom: 1px solid var(--border);
      
       
        }

        /* Mesh Glow Background Effects */
        .mesh-bg div { position: absolute; border-radius: 50%; filter: blur(60px); opacity: 0.35; pointer-events: none; }
        .blob-1 { width: 250px; height: 250px; background: #0ea5e9; top: -50px; left: -20px; }
        .blob-2 { width: 200px; height: 200px; background: #1e3a8a; bottom: -30px; right: -20px; }
        .blob-3 { width: 180px; height: 180px; background: #38bdf8; top: 10%; left: 30%; }

        /* 3. Grid & Component Styling */
        .grid-layout {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
            padding: 10px 5px 10px;
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        .box-container {
            height: 65px;
            border-radius: 1.25rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--glass);
            border: 1px solid var(--border);
            backdrop-filter: blur(12px);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .box-savig { background: var(--savig-yellow) !important; border: none; }

        /* 4. Scrollable Secondary Nav */
        .scroll-wrapper {
            display: flex;
            overflow-x: auto;
            gap: 18px;
            padding: 1px 2px;
            width: 100%;
            max-width: 500px;
            scrollbar-width: none;
            position: relative;
            z-index: 10;
        }
        .scroll-wrapper::-webkit-scrollbar { display: none; }

        .icon-frame {
            width: 30px;
            height: 30px;
            background: var(--glass);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            margin-top: -7px;
        }

        /* 5. Entrance Animations */
        .animate-pop {
            animation: popIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            opacity: 0;
            animation-delay: calc(var(--d) * 0.1s);
        }

        @keyframes popIn {
            from { transform: scale(0.6); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
.theme-toggle {
    position: fixed;
    bottom: 100px; 
    right: 2rem;
    z-index: 10001;
    width: 44px;
    height: 44px;
    border-radius: 12px;
    background: var(yellow);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid var(--border-color);
    color: var(--active-color);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.theme-toggle:hover {
    transform: translateY(-2px);
    background: var(--hover-bg);
}


    </style>


<style>





/* 3. Bottom Nav Link Styling */





/* 5. Modern Pill Toggle Above Nav */
/* 5. Modern Pill Toggle Above Nav */
.theme-toggle {
    position: fixed;
    bottom: 30px; 
    right: 2rem;
    z-index: 10001;
    width: 34px;
    height: 34px;
    border-radius: 12px;
    background: var(yellow);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid var(--border-color);
    color: var(--active-color);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.theme-toggle:hover {
    transform: translateY(-2px);
    background: var(--hover-bg);
}

/* 6. Profile Box Top Right */
.header-container {
position: fixed;

    top: 5px;

    right: 5px;

    z-index: 1000;

}






.profile-box {
    width: 30px;
    height: 30px;
    background: white;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--active-color);
    transition: background-color 0.3s ease;
    margin-top: 10px;
   
}

[data-theme='dark'] .profile-box { 
    background: #1e293b; 
}

/* --- Adjustments for the Top Header Area --- */


/* Grid boxes container needs to stay horizontal */



/* Ensure icons in the toggle switch between moon/sun */
[data-theme='dark'] .theme-toggle .fa-sun { display: block; }
[data-theme='dark'] .theme-toggle .fa-moon { display: none; }
[data-theme='light'] .theme-toggle .fa-sun { display: none; }
[data-theme='light'] .theme-toggle .fa-moon { display: block; }

/* Logic to show moon/sun icons depending on theme (Compatibility Fallback) */
[data-theme='dark'] .theme-toggle i.fa-sun {
    display: inline-block;
}
[data-theme='light'] .theme-toggle i.fa-moon {
    display: inline-block;
}



/
/* Keeps the text readable on the yellow background specifically */

/* If you want ONLY the Savig text to stay dark because the box is yellow */
[data-theme='dark'] .box-container.bg-\[\#ffe11b\] span {
    color: #000000 !important;
}
/* 6. Theme Toggle Logic (Icon Display) */
[data-theme='dark'] .theme-toggle .fa-sun { display: block !important; }
[data-theme='dark'] .theme-toggle .fa-moon { display: none !important; }
[data-theme='light'] .theme-toggle .fa-sun { display: none !important; }
[data-theme='light'] .theme-toggle .fa-moon { display: block !important; }
.universal-bottom-nav:hover{
    color: #2563eb;
}
#universal-bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 65px;
    background-color: var(--nav-bg);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    display: flex;
    justify-content: space-around;
    align-items: center;
    border-top: 1px solid var(--border-color);
    box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.1);
    z-index: 999999;
    padding-bottom: env(safe-area-inset-bottom);
    animation: navSlideUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    font-size: 16px;
    gap:1px
}

/* 1. Global Hover Behavior for Navigation Boxes */
.box-container {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
}

/* 2. Specific Hover Styles for the Main Nav (Top Grid) */
.group:hover .box-container {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
}

/* Savig Button (Specific brand hover) */
.group:hover .box-savig {
    background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
    border-color: #3b82f6;
}

/* Finance & Travel (Blue focus) */
.group:hover .group-hover\:border-blue-500\/50 {
    border-color: rgba(59, 130, 246, 0.5);
    background-color: rgba(59, 130, 246, 0.05);
}

/* Grocery (Orange focus) */
.group:hover .group-hover\:border-orange-500\/50 {
    border-color: rgba(249, 115, 22, 0.5);
    background-color: rgba(249, 115, 22, 0.05);
}

/* 3. Bottom Icon Menu Hover (Cloth, Asset, etc.) */
.group:hover .group-hover\:bg-blue-500\/20 {
    background-color: rgba(59, 130, 246, 0.2);
    border-color: rgba(59, 130, 246, 0.4);
    transform: scale(1.1);
}

/* Text color shift for the labels */
.group:hover span {
    color: #f8fafc; /* Slate-50 */
    transition: color 0.2s ease;
}

/* 4. Active (Click) State for all buttons */
.group:active .box-container, 
.group:active div[class*="rounded-xl"] {
    transform: scale(0.95);
    transition: transform 0.1s ease;
}
/* Profile Button Hover */
.w-12.h-12.rounded-full {
    transition: all 0.3s ease;
    cursor: pointer;
}

.w-12.h-12.rounded-full:hover {
    border-color: #60a5fa; /* blue-400 */
    background-color: rgba(59, 130, 246, 0.2);
    box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
    transform: scale(1.05);
}

/* Global Click Shrink Effect */
a:active, .w-12.h-12:active {
    transform: scale(0.92) !important;
    transition: transform 0.1s ease;
}
/* Enable smooth scrolling for the whole page */
html {
    scroll-behavior: smooth;
}



/* Hide scrollbar for IE, Edge and Firefox */

.no-scrollbar {
    /* Hide scrollbar for IE, Edge and Firefox */
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;     /* Firefox */
    
    /* Smooth Scrolling */
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch; /* Momentum scroll for iOS */
}

/* Hide scrollbar for Chrome, Safari and Opera */
.no-scrollbar::-webkit-scrollbar {
    display: none;
}

    
</style>
</head>
<body class="min-h-screen bg-white-950 flex flex-col items-center">

<header class="nav-container relative w-full border-b border-white/10 shadow-2xl overflow-hidden pb-1">
    <div class="mesh-bg absolute inset-0">
      <div class="blob-1"></div>
      <div class="blob-2"></div>
    </div>

    <div class="max-w-7xl mx-auto px-4 relative z-10 mt-2">
   <nav class="grid grid-cols-4 md:grid-cols-4 lg:grid-cols-6 gap-3">
  <a href="homemob.html" class="animate-pop group" style="--d: 1">
    <div class="box-container box-savig shadow-lg group-hover:scale-105 active:scale-95 flex flex-col items-center justify-center bg-white/5 border border-white/10">
      <div class="relative flex items-center justify-center">
        <i class="fas fa-shield text-blue-600 text-3xl"></i>
        <i class="fas fa-database text-white absolute text-[16px]" style="top: 27%;"></i>
      </div>
      <span class="font-black italic text-[14px] uppercase text-slate-900">Savig</span>
    </div>
  </a>

<a href="financemob.html" class="animate-pop group" style="--d: 2">
    <div class="box-container flex flex-col items-center pt-3 pb-2 bg-white/5 border border-white/10 rounded-2xl transition-all duration-300 group-hover:bg-white/10 group-hover:border-blue-500/50 group-hover:translate-y-[-2px]">
      
      <div class="w-12 h-12 bg-blue-500/10 rounded-xl flex items-center justify-center mb-2 border border-blue-500/20 group-hover:bg-blue-500/20">
        <i class="fas fa-rupee-sign text-blue-400 text-xl"></i>
      </div>

      <span class="font-semibold text-slate-400 text-[11px] uppercase tracking-wider group-hover:text-blue-300">
        Finance
      </span>
    </div>
</a>

  <a href="travelmob.html" class="animate-pop group" style="--d: 3">
    <div class="box-container flex flex-col items-center justify-center bg-white/5 border border-white/10 group-hover:border-blue-500/50">
      <i class="fas fa-plane text-blue-400 text-xl"></i>
      <span class="font-bold text-slate-300 italic text-[14px]">Travel</span>
    </div>
  </a>

  <a href="grocerymob.html" class="animate-pop group" style="--d: 4">
    <div class="box-container flex flex-col items-center justify-center bg-white/5 border border-white/10 group-hover:border-orange-500/50">
      <i class="fas fa-basket-shopping text-orange-400 text-xl"></i>
      <span class="font-bold text-slate-300 italic text-[14px]">Grocery</span>
    </div>
  </a>
</nav>
    </div>


<div class="w-full py-4 flex justify-between items-center max-w-md mx-auto px-4">
    <div class="animate-pop flex items-center gap-3" style="--d: 4.5">
        <div class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center shadow-lg">
            <span id="greeting-emoji" class="text-xl">‚òÄÔ∏è</span>
        </div>

        <div>
            <p id="greeting-time" class="text-white/40 text-[10px] uppercase tracking-[3px] font-bold leading-none mb-1">
                Good Morning
            </p>
            <h2 class="text-white text-lg font-bold">
                <span id="user-display-name" class="text-[#ffe11b]">User</span>
            </h2>
        </div>
    </div>


        <div class="flex items-center gap-4">
          <button class="theme-toggle text-xl text-yellow-400" id="theme-btn">
            <i class="fa-solid fa-sun"></i>
          </button>
          <a href="profilemob.html" class="w-12 h-12  mr-1 rounded-full border-2 border-blue-500/30 bg-slate-800 flex items-center justify-center animate-pop group" style="--d: 6">
            <i class="fas fa-user-circle text-blue-400 text-3xl group-hover:text-blue-300"></i>
          </a>
        </div>
      </div>


     <div class="flex overflow-x-auto no-scrollbar gap-6 md:grid md:grid-cols-5 md:overflow-visible px-4 mt-2">
  
  <a href="clothmob.html" class="flex-shrink-0 flex flex-col items-center group animate-pop" style="--d: 7">
    <div class="w-10 h-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-500/10 group-hover:border-blue-500/40 shadow-lg">
      <i class="fas fa-tshirt text-blue-400 text-lg group-hover:text-blue-300 drop-shadow-[0_0_8px_rgba(59,130,246,0.5)]"></i>
    </div>
    <span class="text-slate-400 text-[10px] font-semibold mt-2.5 uppercase tracking-[1.5px] group-hover:text-white transition-colors">
      Cloth
    </span>
  </a>

  <a href="assetmob.html" class="flex-shrink-0 flex flex-col items-center group animate-pop" style="--d: 8">
    <div class="w-10 h-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-500/10 group-hover:border-blue-500/40 shadow-lg">
      <i class="fas fa-coins text-blue-400 text-lg group-hover:text-blue-300 drop-shadow-[0_0_8px_rgba(59,130,246,0.5)]"></i>
    </div>
    <span class="text-slate-400 text-[10px] font-semibold mt-2.5 uppercase tracking-[1.5px] group-hover:text-white">
      Asset
    </span>
  </a>

  <a href="principalmob.html" class="flex-shrink-0 flex flex-col items-center group animate-pop" style="--d: 9">
    <div class="w-10 h-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-500/10 group-hover:border-blue-500/40 shadow-lg">
      <i class="fas fa-user-shield text-blue-400 text-lg group-hover:text-blue-300 drop-shadow-[0_0_8px_rgba(59,130,246,0.5)]"></i>
    </div>
    <span class="text-slate-400 text-[10px] font-semibold mt-2.5 uppercase tracking-[1.5px] group-hover:text-white">
      Principal
    </span>
  </a>

  <a href="storemob.html" class="flex-shrink-0 flex flex-col items-center group animate-pop" style="--d: 10">
    <div class="w-10 h-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-500/10 group-hover:border-blue-500/40 shadow-lg">
      <i class="fas fa-store text-blue-400 text-lg group-hover:text-blue-300 drop-shadow-[0_0_8px_rgba(59,130,246,0.5)]"></i>
    </div>
    <span class="text-slate-400 text-[10px] font-semibold mt-2.5 uppercase tracking-[1.5px] group-hover:text-white">
      Stores
    </span>
  </a>

  <a href="eventsmob.html" class="flex-shrink-0 flex flex-col items-center group animate-pop" style="--d: 11">
    <div class="w-10 h-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-500/10 group-hover:border-blue-500/40 shadow-lg">
      <i class="fas fa-cake-candles text-blue-400 text-lg group-hover:text-blue-300 drop-shadow-[0_0_8px_rgba(59,130,246,0.5)]"></i>
    </div>
    <span class="text-slate-400 text-[10px] font-semibold mt-2.5 uppercase tracking-[1.5px] group-hover:text-white">
      Events
    </span>
  </a>
</div>
    </div>
  </header>







  

    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.6.10/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.6.10/firebase-database-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.6.10/firebase-auth-compat.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    
<style>
    :root { 
        --bg: #ffffff;
        --card: #f8fafc;
        --text-main: #0f172a;    /* Deep slate for readability */
        --text-muted: #64748b;
        --border: #e2e8f0;
        --accent: #6366f1;
    }

    [data-theme="dark"] { 
        --bg: #0f172a;           /* Deep Navy instead of Black */
        --card: #1e293b;         /* Slate blue for cards */
        --text-main: #f1f5f9;    /* Crisp off-white */
        --text-muted: #94a3b8;
        --border: #334155;
    }



    .stat-card {
        background: var(--card); 
        border: 1px solid var(--border);
        border-radius: 16px; 
        padding: 1.25rem;
     
    }

    .chart-wrapper { position: relative; height: 320px; width: 100%; }
    .hidden { display: none !important; }

    .spinner {
        width: 35px; height: 35px;
        border: 3px solid var(--border);
        border-top: 3px solid var(--accent);
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }


    /* Custom Active State Styles */
.active-link i, 
.active-link div {
    color: #4f46e5 !important; /* Tailwind's indigo-600 */
    font-weight: bold;
}

.active-link {
    transform: scale(1.1);
}
</style>

<div class="flex flex-row items-start justify-between w-full max-w-md mx-auto gap-1 px-3 mt-2">
    
    <div id="todays-overview" class="w-1/2 mb-1">
        <h2 class="text-[14px] font-bold mb-2 flex items-center gap-1 text-blue-700 dark:text-blue-700 uppercase tracking-tight">
            <i class="fas fa-calendar-day text-blue-700"></i> Schedule
        </h2>
        <div id="event-list" class="space-y-3">
            <p class="text-blue-400/70 italic text-[12px] p-3 border border-dashed border-blue-200 dark:border-blue-900/50 rounded-xl text-center leading-tight">Checking...</p>
        </div>
    </div>

    <div id="bday-overview-container" class="w-1/2 ">
        <h6 class="text-[14px] font-bold mb-2 flex items-center gap-1 uppercase tracking-tight text-blue-700 dark:text-blue-700">
            <i class="fas fa-cake-candles text-blue-600"></i> Birthdays
        </h6>
        <div id="bday-realtime-list" class="space-y-3">
            <p class="text-blue-400/70 italic text-[12px] p-3 border border-dashed border-blue-200 dark:border-blue-900/50 rounded-xl text-center leading-tight">Checking...</p>
        </div>
    </div>

</div>
<style>
    :root { 
        --bg: #ffffff;
        --card: #f8fafc;
        --text-main: #0f172a;    /* Deep slate for readability */
        --text-muted: #64748b;
        --border: #e2e8f0;
        --accent: #6366f1;
    }

    [data-theme="dark"] { 
        --bg: #0f172a;           /* Deep Navy instead of Black */
        --card: #1e293b;         /* Slate blue for cards */
        --text-main: #f1f5f9;    /* Crisp off-white */
        --text-muted: #94a3b8;
        --border: #334155;
    }

.group:hover .box-container {
    transform: translateY(-2px);
    box-shadow: none !important; /* Forces shadow removal on hover */
}

    .stat-card {
        background: var(--card); 
        border: 1px solid var(--border);
        border-radius: 16px; 
        padding: 1.25rem;
box-shadow: none !important; /* Removes default shadow */
    }

    .chart-wrapper { position: relative; height: 320px; width: 100%; }
    .hidden { display: none !important; }

    .spinner {
        width: 35px; height: 35px;
        border: 3px solid var(--border);
        border-top: 3px solid var(--accent);
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
</style>
  <div class="max-w-6xl mx-auto">
<header class="flex flex-row justify-between items-center gap-4 mb-1 py-2">
    <div class="flex items-center gap-2">
        <div class="w-1.5 h-4 bg-indigo-600 rounded-full"></div>
        <h1 class="text-base font-bold tracking-tighter uppercase transition-colors duration-300">
            Finance <span class="text-indigo-600 italic">LIVE</span>
        </h1>
    </div>

    <input type="month" id="monthSelector" 
        class="w-auto bg-white-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg py-1.5 px-3 text-slate-700 dark:text-slate-200 font-bold text-xs outline-none">
</header>

 <div class="grid grid-cols-4 lg:grid-cols-4 gap-2 mb-2 px-0">
    <div class="stat-card border-b-2 border-emerald-500 !p-2">
        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-tight mb-0.5">Income</p>
        <h2 id="totalIncome" class="text-sm font-black text-emerald-600 leading-none">‚Çπ0</h2>
    </div>
    
    <div class="stat-card border-b-2 border-rose-500 !p-2">
        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-tight mb-0.5">Expense</p>
        <h2 id="totalExpense" class="text-sm font-black text-rose-500 leading-none">‚Çπ0</h2>
    </div>

    <div class="stat-card border-b-2 border-sky-500 !p-2">
        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-tight mb-0.5">Saving</p>
        <h2 id="monthlySaving" class="text-sm font-black text-sky-600 leading-none">‚Çπ0</h2>
    </div>

    <div class="stat-card border-b-2 border-amber-500 !p-2">
        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-tight mb-0.5">Overall</p>
        <h2 id="overallSaving" class="text-sm font-black text-amber-600 leading-none">‚Çπ0</h2>
    </div>
</div>

        <div id="loader" class="flex flex-col items-center justify-center py-20">
            <div class="spinner"></div>
            <p class="text-slate-400 font-bold mt-1 text-[10px] tracking-widest uppercase">Fetching Records...</p>
        </div>

        <div id="noDataScreen" class="hidden flex flex-col items-center justify-center py-24 border border-dashed border-slate-200 rounded-xl text-center">
            <p class="text-slate-400 font-bold uppercase text-[10px] tracking-widest">No activity found</p>
        </div>

        <div id="chartsContainer" class="hidden grid grid-cols-1 lg:grid-cols-2 ">
            <div class="stat-card">
                <h3 class="font-bold text-[14px] uppercase text-slate-400 tracking-widest">Expense Distribution</h3>
                <div class="chart-wrapper"><canvas id="expensePieChart"></canvas></div>
            </div>
     
        </div>
    </div>
<nav id="universal-bottom-nav" class="flex justify-around items-center py-3 bg-white shadow-lg">
    <a href="homemob.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fa-solid fa-house text-2xl mb-1 transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="text-[15px] transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold">Home</div>
    </a>

    <a href="addressmob.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fa-solid fa-location-dot text-2xl mb-1 transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="text-[15px] transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold">Address</div>
    </a>

    <a href="passwordmob.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fa-solid fa-key text-2xl mb-1 transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="text-[15px] transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold">Password</div>
    </a>

    <a href="contact.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fa-solid fa-envelope text-2xl mb-1 transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="text-[15px] transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold">Contact</div>
    </a>

    <a href="cr.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fas fa-calendar-alt text-2xl mb-1 transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="text-[15px] transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold">Calendar</div>
    </a>
</nav>





¬† ¬†<script>
    // 1. Firebase Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyB78RTVCg0cmSPp7A1RJyyAgBuCeolO0cc",
        authDomain: "sk12-58e9e.firebaseapp.com",
        databaseURL: "https://sk12-58e9e-default-rtdb.firebaseio.com",
        projectId: "sk12-58e9e",
        storageBucket: "sk12-58e9e.appspot.com",
        messagingSenderId: "470207874652",
        appId: "1:470207874652:web:67ba1cf3629b7e5b144899"
    };

    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();
    Chart.register(ChartDataLabels);

    let pieChart = null;

    // 2. Initial Load
    window.onload = () => {
        const now = new Date();
        document.getElementById("monthSelector").value = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, "0")}`;
        auth.onAuthStateChanged(user => { if (user) loadAnalytics(); });
    };

    document.getElementById("monthSelector").addEventListener("change", loadAnalytics);

    // 3. Theme-Aware Color Fetcher
    // This function looks at your CSS variables to find the right color for the current mode
    function getThemeColor() {
        return getComputedStyle(document.documentElement).getPropertyValue('--text-main').trim() || '#0f172a';
    }

    function showLoader(show) {
        document.getElementById("loader").classList.toggle("hidden", !show);
        if(show) {
            document.getElementById("chartsContainer").classList.add("hidden");
            document.getElementById("noDataScreen").classList.add("hidden");
        }
    }

    async function loadAnalytics() {
        const user = auth.currentUser;
        const month = document.getElementById("monthSelector").value;
        if (!user) return;
        showLoader(true);

        // Use .once for a faster, one-time fetch to prevent flickering
        const snapshot = await db.ref(`users/${user.uid}`).once('value');
        const data = snapshot.val() || {};
        
        const monthIncome = Number((data.income && data.income[month]) || 0);
        const monthExpenses = (data.expenses && data.expenses[month]) || {};
        
        let currentMonthTotal = 0, typeTotals = {};
        const expenseArray = Object.values(monthExpenses);

        let totalIncomeAllTime = 0, totalExpenseAllTime = 0;
        if(data.income) Object.values(data.income).forEach(v => totalIncomeAllTime += Number(v));
        if(data.expenses) {
            Object.values(data.expenses).forEach(m => {
                Object.values(m).forEach(e => totalExpenseAllTime += Number(e.amount || 0));
            });
        }

        if (expenseArray.length === 0) {
            showLoader(false);
            document.getElementById("noDataScreen").classList.remove("hidden");
        } else {
            expenseArray.forEach(e => {
                const amt = Number(e.amount || 0);
                currentMonthTotal += amt;
                const type = e.type || "Other";
                typeTotals[type] = (typeTotals[type] || 0) + amt;
            });
            renderCharts(typeTotals);
            showLoader(false);
            document.getElementById("chartsContainer").classList.remove("hidden");
        }

        document.getElementById("totalIncome").innerText = `‚Çπ${monthIncome.toLocaleString()}`;
        document.getElementById("totalExpense").innerText = `‚Çπ${currentMonthTotal.toLocaleString()}`;
        document.getElementById("monthlySaving").innerText = `‚Çπ${(monthIncome - currentMonthTotal).toLocaleString()}`;
        document.getElementById("overallSaving").innerText = `‚Çπ${(totalIncomeAllTime - totalExpenseAllTime).toLocaleString()}`;
    }

   function renderCharts(totals) {
    const labels = Object.keys(totals);
    const data = Object.values(totals);

    // DYNAMIC DETECTION: Get the current text color from CSS variables
    const bodyStyles = window.getComputedStyle(document.body);
    const dynamicLabelColor = bodyStyles.getPropertyValue('--text-main').trim();

    if (pieChart) pieChart.destroy();

    pieChart = new Chart(document.getElementById('expensePieChart'), {
        type: 'pie',
        data: { 
            labels, 
            datasets: [{ 
                data, 
                backgroundColor: ['#6366f1', '#f43f5e', '#10b981', '#f59e0b', '#06b6d4'], 
                // Border matches the card color for a clean "cut" look
                borderColor: bodyStyles.getPropertyValue('--card').trim(), 
                borderWidth: 2 
            }] 
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            layout: { padding: 65 },
            plugins: {
                datalabels: {
                    anchor: 'end',
                    align: 'end',
                    offset: 10,
                    color: dynamicLabelColor, // Automatically switches based on theme
                    font: { weight: '700', size: 11 },
                    formatter: (v, ctx) => {
                        let sum = ctx.dataset.data.reduce((a, b) => a + b, 0);
                        return `${ctx.chart.data.labels[ctx.dataIndex]}\n‚Çπ${v.toLocaleString()} (${((v*100)/sum).toFixed(0)}%)`;
                    },
                    textAlign: 'center'
                },
                legend: { display: false }
            }
        }
    });
}

    // 4. THEME TOGGLE REFRESHER
    // If you have a theme button, make sure it refreshes the charts
    document.getElementById('theme-btn').addEventListener('click', () => {
        // Wait a tiny bit for the data-theme attribute to update in the DOM
        setTimeout(() => {
            if (pieChart) loadAnalytics(); 
        }, 50);
    });

/**
 * Fetches only the 'Pending' events for the current date.
 * Returns an Array of event objects.
 */
async function loadTodaysDashboard() {
    const user = firebase.auth().currentUser;
    const listCont = document.getElementById('event-list');
    
    if (!user) {
        listCont.innerHTML = `<p class="text-red-500 text-center">Please log in to view events.</p>`;
        return;
    }

    // 1. Get Today's Date in YYYY-MM-DD format
    const now = new Date();
    const todayISO = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;

    try {
        // 2. Fetch data from Firebase
        const snapshot = await firebase.database().ref(`users/${user.uid}/events/${todayISO}`).once("value");
        const data = snapshot.val();
        
if (!data) {
    listCont.innerHTML = `
        <div class="p-2 bg-white dark:bg-slate-800 rounded-xl  text-gray-400 dark:text-gray-500 font-medium border border-dashed border-gray-200 dark:border-slate-700 text-xs text-center">
            ‚ú® No events for today.
        </div>`;
    return;
}

        // 3. Process and Filter
        const events = Object.entries(data)
            .map(([id, ev]) => ({ id, ...ev }))
            .filter(ev => ev.status === 'pending')
            .sort((a, b) => a.time.localeCompare(b.time));

 if (events.length === 0) {
    listCont.innerHTML = `
        <div class="p-2 bg-white dark:bg-slate-800 rounded-xl text-center text-emerald-500 font-medium border border-gray-100 text-xs dark:border-slate-700">
            ‚úÖ All events caught up!
        </div>`;
    return;
}

        // 4. Render HTML
        listCont.innerHTML = events.map(ev => `
            <div class="bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border-l-4 border-indigo-500 flex justify-between items-center transition hover:shadow-md">
                <div class="min-w-0">
                    <h3 class="font-bold bg-slate text-gray-800 dark:text-white truncate">${ev.title}</h3>
                    <div class="flex items-center gap-2 text-xs text-indigo-600 font-bold mt-1">
                        <i class="fas fa-clock"></i> ${ev.time}
                        ${ev.location ? `<span class="text-gray-400 font-normal">| <i class="fas fa-location-dot"></i> ${ev.location}</span>` : ''}
                    </div>
                </div>
                <i class="fas fa-chevron-right text-gray-300"></i>
            </div>
        `).join('');

    } catch (err) {
        console.error("Fetch error:", err);
        listCont.innerHTML = `<p class="text-red-500">Failed to load events.</p>`;
    }
}

// Trigger load once user is authenticated
firebase.auth().onAuthStateChanged(user => {
    if (user) loadTodaysDashboard();
});
async function fetchAndShowTodaysBirthdays() {
    const user = firebase.auth().currentUser;
    const listCont = document.getElementById('bday-realtime-list');
    
    if (!user) return;

    const today = new Date();
    const tMonth = today.getMonth() + 1;
    const tDay = today.getDate();

    try {
        const snapshot = await firebase.database().ref(`users/${user.uid}/birthdays`).once("value");
        const allBdays = snapshot.val();

        if (!allBdays) {
    listCont.innerHTML = `
        <div class="bg-white dark:bg-slate-800 p-4 rounded-xl border border-dashed border-gray-200 dark:border-slate-700 text-gray-400 text-xs text-center">
            No birthdays saved yet.
        </div>`;
    return;
}

        const todaysList = Object.values(allBdays).filter(person => {
            if (!person.birthdate || person.birthdate.length < 5) return false;
            const dateParts = person.birthdate.split('-');
            const m = parseInt(dateParts[dateParts.length - 2]);
            const d = parseInt(dateParts[dateParts.length - 1]);
            return m === tMonth && d === tDay;
        });

if (todaysList.length === 0) {
    listCont.innerHTML = `
        <div class="dark:bg-slate-800 p-3 rounded-xl border border-dashed border-gray-200 dark:border-slate-700 dark:text-gray-500 text-gray-400 text-xs text-center bg-white-800 ">
            No birthdays today.
        </div>`;
    return;
}

        listCont.innerHTML = todaysList.map(person => {
             return `
    <div class="flex items-center gap-1 p-2 rounded-lg bg-white dark:bg-slate-800 shadow-sm border border-slate-100 dark:border-slate-700 mt-3">
        <div class="w-7 h-4 bg-white dark:bg-slate-900/30 rounded-full flex items-center justify-center flex-shrink-0">
            <i class="fas fa-birthday-cake text-indigo-600 dark:text-indigo-400 text-[10px]"></i>
        </div>
        <div class="flex-1 min-w-0">
            <div class="text-[11px] font-bold text-slate-800 dark:text-slate-100 truncate uppercase">
                ${person.name}
            </div>
        </div>
    </div>
`;
        }).join('');

    } catch (error) {
        console.error("Error fetching birthdays:", error);
        listCont.innerHTML = `<p class="text-red-500 text-xs text-center bg-white p-2 rounded-lg border border-red-100">Failed to load birthdays.</p>`;
    }
}

firebase.auth().onAuthStateChanged((user) => {
    if (!user) {
        // No user is signed in, redirect to login page immediately
        console.log("Unauthorized access detected. Redirecting...");
        window.location.replace("indexmob.html"); 
    } else {
        // Access granted: User is signed in
        console.log("Access granted for:", user.email);
        
        // 1. Fetch User Name from Realtime Database
        const userId = user.uid;
        firebase.database().ref('users/' + userId).once('value')
            .then((snapshot) => {
                const data = snapshot.val();
                // Priority: DB 'name' -> Auth 'displayName' -> Default 'Safar'
                const finalName = (data && data.name) || user.displayName || "Safar";
                
                const nameElement = document.getElementById('user-display-name');
                if (nameElement) {
                    nameElement.innerText = finalName;
                }
            })
            .catch((error) => {
                console.error("Error fetching user name:", error);
            });

        // 2. Set Time-Based Greeting
        updateTimeGreeting();

        // 3. Initialize Page Functions
        if (typeof fetchAndShowTodaysBirthdays === "function") {
            fetchAndShowTodaysBirthdays();
        }
    }
});

/**
 * Professional Time-Based Greeting Logic
 * Sets message based on current hour
 */
function updateTimeGreeting() {
    const hours = new Date().getHours();
    const greetEl = document.getElementById('greeting-time');
    const emojiEl = document.getElementById('greeting-emoji');
    
    if (!greetEl) return;

    let message = "";
    let emoji = "";

    if (hours >= 5 && hours < 12) {
        message = "Good Morning";
        emoji = "‚òÄÔ∏è"; // Sun for productivity
    } else if (hours >= 12 && hours < 17) {
        message = "Good Afternoon";
        emoji = "üå§Ô∏è"; // Soft sun
    } else if (hours >= 17 && hours < 21) {
        message = "Good Evening";
        emoji = "üåÜ"; // City sunset (very professional/fin-tech vibe)
    } else {
        message = "Good Night";
        emoji = "üåô"; // Calm moon
    }

    greetEl.innerText = message;
    if (emojiEl) emojiEl.innerText = emoji;
}

// Call the function
updateTimeGreeting();
</script>

    <style>
        :root {
            --bg-main: #f8f9fa;
            --card-bg: #ffffff;
            --text-primary: #222222;
            --text-secondary: #555555;
            --accent: #d93025;
            --hover-shadow: rgba(0, 0, 0, 0.1);
            --border: #eeeeee;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-main: #121212;
                --card-bg: #1e1e1e;
                --text-primary: #e0e0e0;
                --text-secondary: #bbbbbb;
                --accent: #ff4d4d;
                --hover-shadow: rgba(0, 0, 0, 0.4);
                --border: #333333;
            }
        }

        /* ‡•ß. ‡§∏‡•Å‡§∞‡•Å‡§µ‡§æ‡§§‡•Ä‡§ö‡•á ‡§õ‡•ã‡§ü‡•á ‡§¨‡§ü‡§£ */
        #news-open-btn {
            
            background: var(--accent); color: white; border: none;
            padding: 5px 5px; border-radius: 50px; font-weight: bold;
            cursor: pointer; box-shadow: 0 4px 15px var(--hover-shadow);
            z-index: 999; font-family: 'Segoe UI', sans-serif;
            display: flex; align-items: center; gap: 2px;
        }

        /* ‡•®. ‡§´‡•Å‡§≤ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ */
        .news-widget {
            display: none; position: fixed; top: 0; left: 0;
            width: 100vw; height: 94vh; background: var(--bg-main);
            flex-direction: column; z-index: 1000;
            font-family: 'Segoe UI', sans-serif; animation: fadeIn 0.3s;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .widget-header {
            background: var(--accent); color: white;
            padding: 5px 5px; font-size: 1.3rem; font-weight: bold;
            display: flex; justify-content: space-between; align-items: center;
        }

        #news-list { flex: 1; overflow-y: auto; padding: 15px; }

        /* ‡•©. ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Ü‡§£‡§ø ‡§π‡•ã‡§µ‡•ç‡§π‡§∞ ‡§á‡§´‡•á‡§ï‡•ç‡§ü */
        .news-item {
            background: var(--card-bg); margin-bottom: 2px;
            border-radius: 12px; border-left: 5px solid var(--accent);
            box-shadow: 0 2px 8px var(--hover-shadow);
            overflow: hidden; transition: all 0.3s ease;
        }

        /* ‡§≤‡§æ‡§à‡§ü/‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°‡§®‡•Å‡§∏‡§æ‡§∞ ‡§π‡•ã‡§µ‡•ç‡§π‡§∞ ‡§¨‡§¶‡§≤ */
        .news-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px var(--hover-shadow);
            background: var(--card-bg); /* ‡§≤‡§æ‡§à‡§ü ‡§Æ‡•ã‡§°‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§π‡§≤‡§ï‡§æ ‡§¨‡§¶‡§≤ */
        }

        .news-header-row {
            padding: 8px; display: flex; align-items: center;
            justify-content: space-between; cursor: pointer;
        }

        .news-text {
            font-size: 1.05rem; font-weight: 500; color: var(--text-primary);
            flex: 1; line-height: 1.4; padding-right: 15px;
        }

        .read-arrow {
            color: var(--accent); font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        /* ‡•™. ‡§°‡§ø‡§ü‡•á‡§≤ ‡§µ‡§ø‡§≠‡§æ‡§ó (‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡•á‡§≤‡•ç‡§Ø‡§æ‡§µ‡§∞ ‡§â‡§ò‡§°‡•á‡§≤) */
        .news-detail {
            max-height: 0; overflow: hidden;
            transition: max-height 0.4s ease-out;
            background: var(--bg-main); padding: 0 18px;
            font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6;
        }

        .news-item.active .news-detail {
            max-height: 500px; padding-bottom: 8px; padding-top: 1px;
            border-top: 1px solid var(--border);
        }

        .news-item.active .read-arrow { transform: rotate(90deg); }

        .full-article-btn {
            display: inline-block; margin-top: 12px;
            color: var(--accent); text-decoration: none; font-weight: bold;
            border: 1px solid var(--accent); padding: 5px 12px; border-radius: 5px;
        }

        .close-btn { cursor: pointer; font-size: 30px; }
        .close-btn:hover { background color: green;}
        .loader { text-align: center; padding: 100px; color: #888; }
    </style>

 

    <script>
        const API_KEY = 'pub_677646a653536356a509177bed9f1352fff4f'; 
        const widget = document.getElementById('newsWidget');
        let hasFetched = false;

        function toggleWidget() {
            if (widget.style.display === 'flex') {
                widget.style.display = 'none';
                document.body.style.overflow = 'auto';
            } else {
                widget.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                if (!hasFetched) fetchNews();
            }
        }

        async function fetchNews() {
            try {
                const query = encodeURIComponent('‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ OR ‡§Æ‡•ã‡§¶‡•Ä OR ‡§Ö‡§Æ‡•á‡§∞‡§ø‡§ï‡§æ OR ‡§∞‡§∂‡§ø‡§Ø‡§æ OR ‡§™‡§æ‡§ï‡§ø‡§∏‡•ç‡§§‡§æ‡§®');
                const url = `https://newsdata.io/api/1/news?apikey=${API_KEY}&q=${query}&language=mr&size=10&category=top`;

                const response = await fetch(url);
                const data = await response.json();

                if (data.status === "success") {
                    const newsList = document.getElementById('news-list');
                    newsList.innerHTML = '';
                    
                    data.results.forEach(article => {
                        const item = document.createElement('div');
                        item.className = 'news-item';
                        
                        const summary = article.description || "‡§Ø‡§æ ‡§¨‡§æ‡§§‡§Æ‡•Ä‡§ö‡§æ ‡§∏‡§µ‡§ø‡§∏‡•ç‡§§‡§∞ ‡§§‡§™‡§∂‡•Ä‡§≤ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§ß‡§ø‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä‡§∏‡§æ‡§†‡•Ä ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§¨‡§æ‡§§‡§Æ‡•Ä ‡§µ‡§æ‡§ö‡§æ.";

                        item.innerHTML = `
                            <div class="news-header-row" onclick="this.parentElement.classList.toggle('active')">
                                <div class="news-text">${article.title}</div>
                                <div class="read-arrow">‚Üí</div>
                            </div>
                            <div class="news-detail">
                                ${summary}
                                <br>
                                <a href="${article.link}" target="_blank" class="full-article-btn">‡§Æ‡•Ç‡§≥ ‡§µ‡•á‡§¨‡§∏‡§æ‡§à‡§ü‡§µ‡§∞ ‡§µ‡§æ‡§ö‡§æ</a>
                            </div>
                        `;
                        newsList.appendChild(item);
                    });
                    hasFetched = true;
                }
            } catch (err) {
                document.getElementById('news-list').innerHTML = "<div class='loader'>‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§§‡§™‡§æ‡§∏‡§æ.</div>";
            }
        }
    </script>













</body>

</html>






























